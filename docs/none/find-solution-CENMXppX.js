var Fe=Object.defineProperty;var Ue=(m,d,v)=>d in m?Fe(m,d,{enumerable:!0,configurable:!0,writable:!0,value:v}):m[d]=v;var At=(m,d,v)=>(Ue(m,typeof d!="symbol"?d+"":d,v),v);(function(){"use strict";/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const m=Symbol("Comlink.proxy"),d=Symbol("Comlink.endpoint"),v=Symbol("Comlink.releaseProxy"),q=Symbol("Comlink.finalizer"),T=Symbol("Comlink.thrown"),Y=e=>typeof e=="object"&&e!==null||typeof e=="function",Et={canHandle:e=>Y(e)&&e[m],serialize(e){const{port1:t,port2:r}=new MessageChannel;return D(e,t),[r,[r]]},deserialize(e){return e.start(),Tt(e)}},bt={canHandle:e=>Y(e)&&T in e,serialize({value:e}){let t;return e instanceof Error?t={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:t={isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},$=new Map([["proxy",Et],["throw",bt]]);function jt(e,t){for(const r of e)if(t===r||r==="*"||r instanceof RegExp&&r.test(t))return!0;return!1}function D(e,t=globalThis,r=["*"]){t.addEventListener("message",function n(a){if(!a||!a.data)return;if(!jt(r,a.origin)){console.warn(`Invalid origin '${a.origin}' for comlink proxy`);return}const{id:u,type:i,path:o}=Object.assign({path:[]},a.data),s=(a.data.argumentList||[]).map(w);let c;try{const p=o.slice(0,-1).reduce((h,S)=>h[S],e),y=o.reduce((h,S)=>h[S],e);switch(i){case"GET":c=y;break;case"SET":p[o.slice(-1)[0]]=w(a.data.value),c=!0;break;case"APPLY":c=y.apply(p,s);break;case"CONSTRUCT":{const h=new y(...s);c=kt(h)}break;case"ENDPOINT":{const{port1:h,port2:S}=new MessageChannel;D(e,S),c=Rt(h,[h])}break;case"RELEASE":c=void 0;break;default:return}}catch(p){c={value:p,[T]:0}}Promise.resolve(c).catch(p=>({value:p,[T]:0})).then(p=>{const[y,h]=R(p);t.postMessage(Object.assign(Object.assign({},y),{id:u}),h),i==="RELEASE"&&(t.removeEventListener("message",n),Z(t),q in e&&typeof e[q]=="function"&&e[q]())}).catch(p=>{const[y,h]=R({value:new TypeError("Unserializable return value"),[T]:0});t.postMessage(Object.assign(Object.assign({},y),{id:u}),h)})}),t.start&&t.start()}function It(e){return e.constructor.name==="MessagePort"}function Z(e){It(e)&&e.close()}function Tt(e,t){return F(e,[],t)}function C(e){if(e)throw new Error("Proxy has been released and is not useable")}function J(e){return _(e,{type:"RELEASE"}).then(()=>{Z(e)})}const M=new WeakMap,P="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const t=(M.get(e)||0)-1;M.set(e,t),t===0&&J(e)});function Ct(e,t){const r=(M.get(t)||0)+1;M.set(t,r),P&&P.register(e,t,e)}function Mt(e){P&&P.unregister(e)}function F(e,t=[],r=function(){}){let n=!1;const a=new Proxy(r,{get(u,i){if(C(n),i===v)return()=>{Mt(a),J(e),n=!0};if(i==="then"){if(t.length===0)return{then:()=>a};const o=_(e,{type:"GET",path:t.map(s=>s.toString())}).then(w);return o.then.bind(o)}return F(e,[...t,i])},set(u,i,o){C(n);const[s,c]=R(o);return _(e,{type:"SET",path:[...t,i].map(p=>p.toString()),value:s},c).then(w)},apply(u,i,o){C(n);const s=t[t.length-1];if(s===d)return _(e,{type:"ENDPOINT"}).then(w);if(s==="bind")return F(e,t.slice(0,-1));const[c,p]=Q(o);return _(e,{type:"APPLY",path:t.map(y=>y.toString()),argumentList:c},p).then(w)},construct(u,i){C(n);const[o,s]=Q(i);return _(e,{type:"CONSTRUCT",path:t.map(c=>c.toString()),argumentList:o},s).then(w)}});return Ct(a,e),a}function Pt(e){return Array.prototype.concat.apply([],e)}function Q(e){const t=e.map(R);return[t.map(r=>r[0]),Pt(t.map(r=>r[1]))]}const K=new WeakMap;function Rt(e,t){return K.set(e,t),e}function kt(e){return Object.assign(e,{[m]:!0})}function R(e){for(const[t,r]of $)if(r.canHandle(e)){const[n,a]=r.serialize(e);return[{type:"HANDLER",name:t,value:n},a]}return[{type:"RAW",value:e},K.get(e)||[]]}function w(e){switch(e.type){case"HANDLER":return $.get(e.name).deserialize(e.value);case"RAW":return e.value}}function _(e,t,r){return new Promise(n=>{const a=Nt();e.addEventListener("message",function u(i){!i.data||!i.data.id||i.data.id!==a||(e.removeEventListener("message",u),n(i.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:a},t),r)})}function Nt(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}var zt=function(){return!0};function f(e){return e!=null&&typeof e=="object"&&e["@@functional/placeholder"]===!0}function g(e){return function t(r){return arguments.length===0||f(r)?t:e.apply(this,arguments)}}function l(e){return function t(r,n){switch(arguments.length){case 0:return t;case 1:return f(r)?t:g(function(a){return e(r,a)});default:return f(r)&&f(n)?t:f(r)?g(function(a){return e(a,n)}):f(n)?g(function(a){return e(r,a)}):e(r,n)}}}function E(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(r){return t.apply(this,arguments)};case 2:return function(r,n){return t.apply(this,arguments)};case 3:return function(r,n,a){return t.apply(this,arguments)};case 4:return function(r,n,a,u){return t.apply(this,arguments)};case 5:return function(r,n,a,u,i){return t.apply(this,arguments)};case 6:return function(r,n,a,u,i,o){return t.apply(this,arguments)};case 7:return function(r,n,a,u,i,o,s){return t.apply(this,arguments)};case 8:return function(r,n,a,u,i,o,s,c){return t.apply(this,arguments)};case 9:return function(r,n,a,u,i,o,s,c,p){return t.apply(this,arguments)};case 10:return function(r,n,a,u,i,o,s,c,p,y){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function tt(e,t,r){return function(){for(var n=[],a=0,u=e,i=0,o=!1;i<t.length||a<arguments.length;){var s;i<t.length&&(!f(t[i])||a>=arguments.length)?s=t[i]:(s=arguments[a],a+=1),n[i]=s,f(s)?o=!0:u-=1,i+=1}return!o&&u<=0?r.apply(this,n):E(Math.max(0,u),tt(e,n,r))}}var et=l(function(t,r){return t===1?g(r):E(t,tt(t,[],r))});function rt(e){return function t(r,n,a){switch(arguments.length){case 0:return t;case 1:return f(r)?t:l(function(u,i){return e(r,u,i)});case 2:return f(r)&&f(n)?t:f(r)?l(function(u,i){return e(u,n,i)}):f(n)?l(function(u,i){return e(r,u,i)}):g(function(u){return e(r,n,u)});default:return f(r)&&f(n)&&f(a)?t:f(r)&&f(n)?l(function(u,i){return e(u,i,a)}):f(r)&&f(a)?l(function(u,i){return e(u,n,i)}):f(n)&&f(a)?l(function(u,i){return e(r,u,i)}):f(r)?g(function(u){return e(u,n,a)}):f(n)?g(function(u){return e(r,u,a)}):f(a)?g(function(u){return e(r,n,u)}):e(r,n,a)}}}var k=Array.isArray||function(t){return t!=null&&t.length>=0&&Object.prototype.toString.call(t)==="[object Array]"};function Lt(e){return e!=null&&typeof e["@@transducer/step"]=="function"}function U(e,t,r){return function(){if(arguments.length===0)return r();var n=arguments[arguments.length-1];if(!k(n)){for(var a=0;a<e.length;){if(typeof n[e[a]]=="function")return n[e[a]].apply(n,Array.prototype.slice.call(arguments,0,-1));a+=1}if(Lt(n)){var u=t.apply(null,Array.prototype.slice.call(arguments,0,-1));return u(n)}}return r.apply(this,arguments)}}var O={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}};function nt(e){for(var t=[],r;!(r=e.next()).done;)t.push(r.value);return t}function at(e,t,r){for(var n=0,a=r.length;n<a;){if(e(t,r[n]))return!0;n+=1}return!1}function xt(e){var t=String(e).match(/^function (\w*)/);return t==null?"":t[1]}function b(e,t){return Object.prototype.hasOwnProperty.call(t,e)}function qt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var B=typeof Object.is=="function"?Object.is:qt,ut=Object.prototype.toString,Dt=function(){return ut.call(arguments)==="[object Arguments]"?function(t){return ut.call(t)==="[object Arguments]"}:function(t){return b("callee",t)}}(),Ft=!{toString:null}.propertyIsEnumerable("toString"),it=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],ot=function(){return arguments.propertyIsEnumerable("length")}(),Ut=function(t,r){for(var n=0;n<t.length;){if(t[n]===r)return!0;n+=1}return!1},A=g(typeof Object.keys=="function"&&!ot?function(t){return Object(t)!==t?[]:Object.keys(t)}:function(t){if(Object(t)!==t)return[];var r,n,a=[],u=ot&&Dt(t);for(r in t)b(r,t)&&(!u||r!=="length")&&(a[a.length]=r);if(Ft)for(n=it.length-1;n>=0;)r=it[n],b(r,t)&&!Ut(a,r)&&(a[a.length]=r),n-=1;return a}),st=g(function(t){return t===null?"Null":t===void 0?"Undefined":Object.prototype.toString.call(t).slice(8,-1)});function ct(e,t,r,n){var a=nt(e),u=nt(t);function i(o,s){return V(o,s,r.slice(),n.slice())}return!at(function(o,s){return!at(i,s,o)},u,a)}function V(e,t,r,n){if(B(e,t))return!0;var a=st(e);if(a!==st(t))return!1;if(typeof e["fantasy-land/equals"]=="function"||typeof t["fantasy-land/equals"]=="function")return typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](t)&&typeof t["fantasy-land/equals"]=="function"&&t["fantasy-land/equals"](e);if(typeof e.equals=="function"||typeof t.equals=="function")return typeof e.equals=="function"&&e.equals(t)&&typeof t.equals=="function"&&t.equals(e);switch(a){case"Arguments":case"Array":case"Object":if(typeof e.constructor=="function"&&xt(e.constructor)==="Promise")return e===t;break;case"Boolean":case"Number":case"String":if(!(typeof e==typeof t&&B(e.valueOf(),t.valueOf())))return!1;break;case"Date":if(!B(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(!(e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.sticky===t.sticky&&e.unicode===t.unicode))return!1;break}for(var u=r.length-1;u>=0;){if(r[u]===e)return n[u]===t;u-=1}switch(a){case"Map":return e.size!==t.size?!1:ct(e.entries(),t.entries(),r.concat([e]),n.concat([t]));case"Set":return e.size!==t.size?!1:ct(e.values(),t.values(),r.concat([e]),n.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var i=A(e);if(i.length!==A(t).length)return!1;var o=r.concat([e]),s=n.concat([t]);for(u=i.length-1;u>=0;){var c=i[u];if(!(b(c,t)&&V(t[c],e[c],o,s)))return!1;u-=1}return!0}var N=l(function(t,r){return V(t,r,[],[])});function Bt(e,t,r){var n,a;if(typeof e.indexOf=="function")switch(typeof t){case"number":if(t===0){for(n=1/t;r<e.length;){if(a=e[r],a===0&&1/a===n)return r;r+=1}return-1}else if(t!==t){for(;r<e.length;){if(a=e[r],typeof a=="number"&&a!==a)return r;r+=1}return-1}return e.indexOf(t,r);case"string":case"boolean":case"function":case"undefined":return e.indexOf(t,r);case"object":if(t===null)return e.indexOf(t,r)}for(;r<e.length;){if(N(e[r],t))return r;r+=1}return-1}function Vt(e,t){return Bt(t,e,0)>=0}function z(e,t){for(var r=0,n=t.length,a=Array(n);r<n;)a[r]=e(t[r]),r+=1;return a}function H(e){var t=e.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return'"'+t.replace(/"/g,'\\"')+'"'}var j=function(t){return(t<10?"0":"")+t},Ht=typeof Date.prototype.toISOString=="function"?function(t){return t.toISOString()}:function(t){return t.getUTCFullYear()+"-"+j(t.getUTCMonth()+1)+"-"+j(t.getUTCDate())+"T"+j(t.getUTCHours())+":"+j(t.getUTCMinutes())+":"+j(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function Wt(e){return function(){return!e.apply(this,arguments)}}function ft(e,t,r){for(var n=0,a=r.length;n<a;)t=e(t,r[n]),n+=1;return t}function Xt(e,t){for(var r=0,n=t.length,a=[];r<n;)e(t[r])&&(a[a.length]=t[r]),r+=1;return a}function lt(e){return Object.prototype.toString.call(e)==="[object Object]"}var Gt=function(){function e(t,r){this.xf=r,this.f=t}return e.prototype["@@transducer/init"]=O.init,e.prototype["@@transducer/result"]=O.result,e.prototype["@@transducer/step"]=function(t,r){return this.f(r)?this.xf["@@transducer/step"](t,r):t},e}();function Yt(e){return function(t){return new Gt(e,t)}}var $t=l(U(["fantasy-land/filter","filter"],Yt,function(e,t){return lt(t)?ft(function(r,n){return e(t[n])&&(r[n]=t[n]),r},{},A(t)):Xt(e,t)})),Zt=l(function(t,r){return $t(Wt(t),r)});function gt(e,t){var r=function(i){var o=t.concat([e]);return Vt(i,o)?"<Circular>":gt(i,o)},n=function(u,i){return z(function(o){return H(o)+": "+r(u[o])},i.slice().sort())};switch(Object.prototype.toString.call(e)){case"[object Arguments]":return"(function() { return arguments; }("+z(r,e).join(", ")+"))";case"[object Array]":return"["+z(r,e).concat(n(e,Zt(function(u){return/^\d+$/.test(u)},A(e)))).join(", ")+"]";case"[object Boolean]":return typeof e=="object"?"new Boolean("+r(e.valueOf())+")":e.toString();case"[object Date]":return"new Date("+(isNaN(e.valueOf())?r(NaN):H(Ht(e)))+")";case"[object Map]":return"new Map("+r(Array.from(e))+")";case"[object Null]":return"null";case"[object Number]":return typeof e=="object"?"new Number("+r(e.valueOf())+")":1/e===-1/0?"-0":e.toString(10);case"[object Set]":return"new Set("+r(Array.from(e).sort())+")";case"[object String]":return typeof e=="object"?"new String("+r(e.valueOf())+")":H(e);case"[object Undefined]":return"undefined";default:if(typeof e.toString=="function"){var a=e.toString();if(a!=="[object Object]")return a}return"{"+n(e,A(e)).join(", ")+"}"}}var pt=g(function(t){return gt(t,[])}),Jt=l(function(t,r){if(t===r)return r;function n(s,c){if(s>c!=c>s)return c>s?c:s}var a=n(t,r);if(a!==void 0)return a;var u=n(typeof t,typeof r);if(u!==void 0)return u===typeof t?t:r;var i=pt(t),o=n(i,pt(r));return o!==void 0&&o===i?t:r}),Qt=function(){function e(t,r){this.xf=r,this.f=t}return e.prototype["@@transducer/init"]=O.init,e.prototype["@@transducer/result"]=O.result,e.prototype["@@transducer/step"]=function(t,r){return this.xf["@@transducer/step"](t,this.f(r))},e}(),Kt=function(t){return function(r){return new Qt(t,r)}},te=l(U(["fantasy-land/map","map"],Kt,function(t,r){switch(Object.prototype.toString.call(r)){case"[object Function]":return et(r.length,function(){return t.call(this,r.apply(this,arguments))});case"[object Object]":return ft(function(n,a){return n[a]=t(r[a]),n},{},A(r));default:return z(t,r)}})),ee=Number.isInteger||function(t){return t<<0===t};function ht(e){return Object.prototype.toString.call(e)==="[object String]"}var yt=l(function(t,r){var n=t<0?r.length+t:t;return ht(r)?r.charAt(n):r[n]}),dt=l(function(t,r){if(r!=null)return ee(t)?yt(t,r):r[t]}),re=g(function(t){return k(t)?!0:!t||typeof t!="object"||ht(t)?!1:t.length===0?!0:t.length>0?t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1):!1}),mt=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function ne(e,t,r){return function(a,u,i){if(re(i))return e(a,u,i);if(i==null)return u;if(typeof i["fantasy-land/reduce"]=="function")return t(a,u,i,"fantasy-land/reduce");if(i[mt]!=null)return r(a,u,i[mt]());if(typeof i.next=="function")return r(a,u,i);if(typeof i.reduce=="function")return t(a,u,i,"reduce");throw new TypeError("reduce: list must be array or iterable")}}function ae(e,t,r){for(var n=0,a=r.length;n<a;){if(t=e["@@transducer/step"](t,r[n]),t&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}n+=1}return e["@@transducer/result"](t)}var ue=l(function(t,r){return E(t.length,function(){return t.apply(r,arguments)})});function ie(e,t,r){for(var n=r.next();!n.done;){if(t=e["@@transducer/step"](t,n.value),t&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}n=r.next()}return e["@@transducer/result"](t)}function oe(e,t,r,n){return e["@@transducer/result"](r[n](ue(e["@@transducer/step"],e),t))}var se=ne(ae,oe,ie),ce=function(){function e(t){this.f=t}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(t){return t},e.prototype["@@transducer/step"]=function(t,r){return this.f(t,r)},e}();function fe(e){return new ce(e)}var vt=rt(function(e,t,r){return se(typeof e=="function"?fe(e):e,t,r)});function le(e,t){return function(){return t.call(this,e.apply(this,arguments))}}function wt(e,t){return function(){var r=arguments.length;if(r===0)return t();var n=arguments[r-1];return k(n)||typeof n[e]!="function"?t.apply(this,arguments):n[e].apply(n,Array.prototype.slice.call(arguments,0,r-1))}}var St=rt(wt("slice",function(t,r,n){return Array.prototype.slice.call(n,t,r)})),ge=g(wt("tail",St(1,1/0)));function pe(){if(arguments.length===0)throw new Error("pipe requires at least one argument");return E(arguments[0].length,vt(le,arguments[0],ge(arguments)))}var he=g(function(t){var r=vt(Jt,0,te(function(n){return n[0].length},t));return E(r,function(){for(var n=0;n<t.length;){if(t[n][0].apply(this,arguments))return t[n][1].apply(this,arguments);n+=1}})}),ye=function(){function e(t,r){this.xf=r,this.n=t}return e.prototype["@@transducer/init"]=O.init,e.prototype["@@transducer/result"]=O.result,e.prototype["@@transducer/step"]=function(t,r){return this.n>0?(this.n-=1,t):this.xf["@@transducer/step"](t,r)},e}();function de(e){return function(t){return new ye(e,t)}}var me=l(U(["drop"],de,function(t,r){return St(Math.max(0,t),1/0,r)})),ve=yt(-1),we=l(function(t,r){return me(t>=0?r.length-t:0,r)}),Se=l(function e(t,r){if(!lt(r)&&!k(r))return r;var n=r instanceof Array?[]:{},a,u,i;for(u in r)a=t[u],i=typeof a,n[u]=i==="function"?a(r[u]):a&&i==="object"?e(a,r[u]):r[u];return n}),_e=g(function(t){return et(t.length,function(r,n){var a=Array.prototype.slice.call(arguments,0);return a[0]=n,a[1]=r,t.apply(this,a)})});function Oe(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1,n=arguments.length;r<n;){var a=arguments[r];if(a!=null)for(var u in a)b(u,a)&&(t[u]=a[u]);r+=1}return t}var Ae=typeof Object.assign=="function"?Object.assign:Oe,Ee=l(function(t,r){return t<=r}),be=l(function(t,r){return Ae({},r,t)}),W=l(function(t,r){return Array.prototype.slice.call(r,0).sort(function(n,a){var u=t(n),i=t(a);return u<i?-1:u>i?1:0})});const je=400,Ie=10,Te=.8,Ce=e=>e.length>0,Me=(e,t)=>{const r=e.height*t;if(r<=e.width)return{width:r,height:e.height};{const n=e.width/t;return{width:e.width,height:n}}},_t=e=>"url"in e;function*X(e,t){_t(e)?yield t:(yield*X(e.first,t+1),yield*X(e.second,t+1))}const Pe=e=>{const t=[...X(e,0)];if(t.length===0)return 0;const r=Math.max(...t),n=Math.min(...t);return r/(r-n)},Re=({sizeHomogeneity:e,score:t})=>t*e,ke=he([[_e(Ee)(9),()=>30],[N(10),()=>25],[N(11),()=>20],[N(12),()=>10],[zt,()=>5]]),Ne=e=>{const t=e[0].pictures.length,r=pe(W(Re),we(ke(t)),W(dt("score")))(e);return Se({pictures:W(dt("url"))},ve(r))},ze=e=>{let t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){const a=e[n],u=a.width*a.height;u<t&&(t=u),u>r&&(r=u)}return t/r},I=(e,t,r)=>{if(_t(r))return[{position:e,dimension:t,url:r.url}];if(r.horizontal){const n=t.height*r.first.aspectRatio;return[...I(e,{width:n,height:t.height},r.first),...I({x:e.x+n,y:e.y},{width:t.width-n,height:t.height},r.second)]}else{const n=t.width/r.first.aspectRatio;return[...I(e,{width:t.width,height:n},r.first),...I({x:e.x,y:e.y+n},{width:t.width,height:t.height-n},r.second)]}},Le=(e,t,r)=>{const n=I({x:0,y:0},e,r),a=ze(n.map(u=>u.dimension));return{dimension:e,score:t,sizeHomogeneity:a,pictures:n}};class L{constructor(t,r,n){At(this,"aspectRatio",0);this.horizontal=t,this.first=r,this.second=n;const a=r.aspectRatio+n.aspectRatio;this.aspectRatio=t?a:r.aspectRatio*n.aspectRatio/a}}const x=(e,t)=>e+Math.random()*(t-e+1)|0;function*G(e){if(e.length===1)yield e[0];else for(let t=1;t<e.length;t++){const r=G(e.slice(0,t)),n=G(e.slice(t));for(const a of r)for(const u of n)yield new L(!0,a,u),yield new L(!1,a,u)}}const Ot=e=>{const t=e.length-1;if(t===0)return e[0];if(t===1)return new L(x(0,1)===0,e[0],e[1]);const r=x(0,t);let n;do n=x(0,t);while(r===n);const a=new L(x(0,1)===0,e[r],e[n]);return Ot(e.with(r,a).toSpliced(n,1))};function*xe(e){for(;;)yield Ot(e)}const qe={maxComputationTime:je,randomizeThreshold:Ie};var De=Object.freeze({__proto__:null,findSolution:(e,t,r)=>{const n=be(r??{},qe),a=Date.now(),u=t.width/t.height,i=[],o=e.length>=n.randomizeThreshold,s=o?xe(e):G(e);for(const c of s){const y=1/(1+Math.abs(c.aspectRatio-u)),h=Pe(c);if(o&&(h<=.6||y<Te))continue;const S=Me(t,c.aspectRatio);if(i.push(Le(S,y,c)),o&&Date.now()-a>n.maxComputationTime)break}if(console.debug("solutions found: ",i.length),!Ce(i))throw new Error("No solution");return Ne(i)}});D(De)})();
