var Ue=Object.defineProperty;var Le=(m,d,S)=>d in m?Ue(m,d,{enumerable:!0,configurable:!0,writable:!0,value:S}):m[d]=S;var At=(m,d,S)=>Le(m,typeof d!="symbol"?d+"":d,S);(function(){"use strict";/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const m=Symbol("Comlink.proxy"),d=Symbol("Comlink.endpoint"),S=Symbol("Comlink.releaseProxy"),D=Symbol("Comlink.finalizer"),T=Symbol("Comlink.thrown"),Y=t=>typeof t=="object"&&t!==null||typeof t=="function",Et={canHandle:t=>Y(t)&&t[m],serialize(t){const{port1:e,port2:r}=new MessageChannel;return F(t,e),[r,[r]]},deserialize(t){return t.start(),Tt(t)}},bt={canHandle:t=>Y(t)&&T in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},$=new Map([["proxy",Et],["throw",bt]]);function jt(t,e){for(const r of t)if(e===r||r==="*"||r instanceof RegExp&&r.test(e))return!0;return!1}function F(t,e=globalThis,r=["*"]){e.addEventListener("message",function n(a){if(!a||!a.data)return;if(!jt(r,a.origin)){console.warn(`Invalid origin '${a.origin}' for comlink proxy`);return}const{id:u,type:o,path:i}=Object.assign({path:[]},a.data),c=(a.data.argumentList||[]).map(v);let s;try{const g=i.slice(0,-1).reduce((h,w)=>h[w],t),y=i.reduce((h,w)=>h[w],t);switch(o){case"GET":s=y;break;case"SET":g[i.slice(-1)[0]]=v(a.data.value),s=!0;break;case"APPLY":s=y.apply(g,c);break;case"CONSTRUCT":{const h=new y(...c);s=kt(h)}break;case"ENDPOINT":{const{port1:h,port2:w}=new MessageChannel;F(t,w),s=Rt(h,[h])}break;case"RELEASE":s=void 0;break;default:return}}catch(g){s={value:g,[T]:0}}Promise.resolve(s).catch(g=>({value:g,[T]:0})).then(g=>{const[y,h]=R(g);e.postMessage(Object.assign(Object.assign({},y),{id:u}),h),o==="RELEASE"&&(e.removeEventListener("message",n),Z(e),D in t&&typeof t[D]=="function"&&t[D]())}).catch(g=>{const[y,h]=R({value:new TypeError("Unserializable return value"),[T]:0});e.postMessage(Object.assign(Object.assign({},y),{id:u}),h)})}),e.start&&e.start()}function It(t){return t.constructor.name==="MessagePort"}function Z(t){It(t)&&t.close()}function Tt(t,e){const r=new Map;return t.addEventListener("message",function(a){const{data:u}=a;if(!u||!u.id)return;const o=r.get(u.id);if(o)try{o(u)}finally{r.delete(u.id)}}),U(t,r,[],e)}function M(t){if(t)throw new Error("Proxy has been released and is not useable")}function J(t){return _(t,new Map,{type:"RELEASE"}).then(()=>{Z(t)})}const C=new WeakMap,P="FinalizationRegistry"in globalThis&&new FinalizationRegistry(t=>{const e=(C.get(t)||0)-1;C.set(t,e),e===0&&J(t)});function Mt(t,e){const r=(C.get(e)||0)+1;C.set(e,r),P&&P.register(t,e,t)}function Ct(t){P&&P.unregister(t)}function U(t,e,r=[],n=function(){}){let a=!1;const u=new Proxy(n,{get(o,i){if(M(a),i===S)return()=>{Ct(u),J(t),e.clear(),a=!0};if(i==="then"){if(r.length===0)return{then:()=>u};const c=_(t,e,{type:"GET",path:r.map(s=>s.toString())}).then(v);return c.then.bind(c)}return U(t,e,[...r,i])},set(o,i,c){M(a);const[s,g]=R(c);return _(t,e,{type:"SET",path:[...r,i].map(y=>y.toString()),value:s},g).then(v)},apply(o,i,c){M(a);const s=r[r.length-1];if(s===d)return _(t,e,{type:"ENDPOINT"}).then(v);if(s==="bind")return U(t,e,r.slice(0,-1));const[g,y]=Q(c);return _(t,e,{type:"APPLY",path:r.map(h=>h.toString()),argumentList:g},y).then(v)},construct(o,i){M(a);const[c,s]=Q(i);return _(t,e,{type:"CONSTRUCT",path:r.map(g=>g.toString()),argumentList:c},s).then(v)}});return Mt(u,t),u}function Pt(t){return Array.prototype.concat.apply([],t)}function Q(t){const e=t.map(R);return[e.map(r=>r[0]),Pt(e.map(r=>r[1]))]}const K=new WeakMap;function Rt(t,e){return K.set(t,e),t}function kt(t){return Object.assign(t,{[m]:!0})}function R(t){for(const[e,r]of $)if(r.canHandle(t)){const[n,a]=r.serialize(t);return[{type:"HANDLER",name:e,value:n},a]}return[{type:"RAW",value:t},K.get(t)||[]]}function v(t){switch(t.type){case"HANDLER":return $.get(t.name).deserialize(t.value);case"RAW":return t.value}}function _(t,e,r,n){return new Promise(a=>{const u=Nt();e.set(u,a),t.start&&t.start(),t.postMessage(Object.assign({id:u},r),n)})}function Nt(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}var zt=function(){return!0};function l(t){return t!=null&&typeof t=="object"&&t["@@functional/placeholder"]===!0}function p(t){return function e(r){return arguments.length===0||l(r)?e:t.apply(this,arguments)}}function f(t){return function e(r,n){switch(arguments.length){case 0:return e;case 1:return l(r)?e:p(function(a){return t(r,a)});default:return l(r)&&l(n)?e:l(r)?p(function(a){return t(a,n)}):l(n)?p(function(a){return t(r,a)}):t(r,n)}}}function E(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(r){return e.apply(this,arguments)};case 2:return function(r,n){return e.apply(this,arguments)};case 3:return function(r,n,a){return e.apply(this,arguments)};case 4:return function(r,n,a,u){return e.apply(this,arguments)};case 5:return function(r,n,a,u,o){return e.apply(this,arguments)};case 6:return function(r,n,a,u,o,i){return e.apply(this,arguments)};case 7:return function(r,n,a,u,o,i,c){return e.apply(this,arguments)};case 8:return function(r,n,a,u,o,i,c,s){return e.apply(this,arguments)};case 9:return function(r,n,a,u,o,i,c,s,g){return e.apply(this,arguments)};case 10:return function(r,n,a,u,o,i,c,s,g,y){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function tt(t,e,r){return function(){for(var n=[],a=0,u=t,o=0,i=!1;o<e.length||a<arguments.length;){var c;o<e.length&&(!l(e[o])||a>=arguments.length)?c=e[o]:(c=arguments[a],a+=1),n[o]=c,l(c)?i=!0:u-=1,o+=1}return!i&&u<=0?r.apply(this,n):E(Math.max(0,u),tt(t,n,r))}}var et=f(function(e,r){return e===1?p(r):E(e,tt(e,[],r))});function rt(t){return function e(r,n,a){switch(arguments.length){case 0:return e;case 1:return l(r)?e:f(function(u,o){return t(r,u,o)});case 2:return l(r)&&l(n)?e:l(r)?f(function(u,o){return t(u,n,o)}):l(n)?f(function(u,o){return t(r,u,o)}):p(function(u){return t(r,n,u)});default:return l(r)&&l(n)&&l(a)?e:l(r)&&l(n)?f(function(u,o){return t(u,o,a)}):l(r)&&l(a)?f(function(u,o){return t(u,n,o)}):l(n)&&l(a)?f(function(u,o){return t(r,u,o)}):l(r)?p(function(u){return t(u,n,a)}):l(n)?p(function(u){return t(r,u,a)}):l(a)?p(function(u){return t(r,n,u)}):t(r,n,a)}}}var k=Array.isArray||function(e){return e!=null&&e.length>=0&&Object.prototype.toString.call(e)==="[object Array]"};function xt(t){return t!=null&&typeof t["@@transducer/step"]=="function"}function L(t,e,r){return function(){if(arguments.length===0)return r();var n=arguments[arguments.length-1];if(!k(n)){for(var a=0;a<t.length;){if(typeof n[t[a]]=="function")return n[t[a]].apply(n,Array.prototype.slice.call(arguments,0,-1));a+=1}if(xt(n)){var u=e.apply(null,Array.prototype.slice.call(arguments,0,-1));return u(n)}}return r.apply(this,arguments)}}var O={init:function(){return this.xf["@@transducer/init"]()},result:function(t){return this.xf["@@transducer/result"](t)}};function nt(t){for(var e=[],r;!(r=t.next()).done;)e.push(r.value);return e}function at(t,e,r){for(var n=0,a=r.length;n<a;){if(t(e,r[n]))return!0;n+=1}return!1}function qt(t){var e=String(t).match(/^function (\w*)/);return e==null?"":e[1]}function b(t,e){return Object.prototype.hasOwnProperty.call(e,t)}function Dt(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var B=typeof Object.is=="function"?Object.is:Dt,ut=Object.prototype.toString,Ft=function(){return ut.call(arguments)==="[object Arguments]"?function(e){return ut.call(e)==="[object Arguments]"}:function(e){return b("callee",e)}}(),Ut=!{toString:null}.propertyIsEnumerable("toString"),ot=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],it=function(){return arguments.propertyIsEnumerable("length")}(),Lt=function(e,r){for(var n=0;n<e.length;){if(e[n]===r)return!0;n+=1}return!1},A=p(typeof Object.keys=="function"&&!it?function(e){return Object(e)!==e?[]:Object.keys(e)}:function(e){if(Object(e)!==e)return[];var r,n,a=[],u=it&&Ft(e);for(r in e)b(r,e)&&(!u||r!=="length")&&(a[a.length]=r);if(Ut)for(n=ot.length-1;n>=0;)r=ot[n],b(r,e)&&!Lt(a,r)&&(a[a.length]=r),n-=1;return a}),st=p(function(e){return e===null?"Null":e===void 0?"Undefined":Object.prototype.toString.call(e).slice(8,-1)});function ct(t,e,r,n){var a=nt(t),u=nt(e);function o(i,c){return V(i,c,r.slice(),n.slice())}return!at(function(i,c){return!at(o,c,i)},u,a)}function V(t,e,r,n){if(B(t,e))return!0;var a=st(t);if(a!==st(e))return!1;if(typeof t["fantasy-land/equals"]=="function"||typeof e["fantasy-land/equals"]=="function")return typeof t["fantasy-land/equals"]=="function"&&t["fantasy-land/equals"](e)&&typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](t);if(typeof t.equals=="function"||typeof e.equals=="function")return typeof t.equals=="function"&&t.equals(e)&&typeof e.equals=="function"&&e.equals(t);switch(a){case"Arguments":case"Array":case"Object":if(typeof t.constructor=="function"&&qt(t.constructor)==="Promise")return t===e;break;case"Boolean":case"Number":case"String":if(!(typeof t==typeof e&&B(t.valueOf(),e.valueOf())))return!1;break;case"Date":if(!B(t.valueOf(),e.valueOf()))return!1;break;case"Error":return t.name===e.name&&t.message===e.message;case"RegExp":if(!(t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline&&t.sticky===e.sticky&&t.unicode===e.unicode))return!1;break}for(var u=r.length-1;u>=0;){if(r[u]===t)return n[u]===e;u-=1}switch(a){case"Map":return t.size!==e.size?!1:ct(t.entries(),e.entries(),r.concat([t]),n.concat([e]));case"Set":return t.size!==e.size?!1:ct(t.values(),e.values(),r.concat([t]),n.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var o=A(t);if(o.length!==A(e).length)return!1;var i=r.concat([t]),c=n.concat([e]);for(u=o.length-1;u>=0;){var s=o[u];if(!(b(s,e)&&V(e[s],t[s],i,c)))return!1;u-=1}return!0}var N=f(function(e,r){return V(e,r,[],[])});function Bt(t,e,r){var n,a;if(typeof t.indexOf=="function")switch(typeof e){case"number":if(e===0){for(n=1/e;r<t.length;){if(a=t[r],a===0&&1/a===n)return r;r+=1}return-1}else if(e!==e){for(;r<t.length;){if(a=t[r],typeof a=="number"&&a!==a)return r;r+=1}return-1}return t.indexOf(e,r);case"string":case"boolean":case"function":case"undefined":return t.indexOf(e,r);case"object":if(e===null)return t.indexOf(e,r)}for(;r<t.length;){if(N(t[r],e))return r;r+=1}return-1}function Vt(t,e){return Bt(e,t,0)>=0}function z(t,e){for(var r=0,n=e.length,a=Array(n);r<n;)a[r]=t(e[r]),r+=1;return a}function H(t){var e=t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return'"'+e.replace(/"/g,'\\"')+'"'}var j=function(e){return(e<10?"0":"")+e},Ht=typeof Date.prototype.toISOString=="function"?function(e){return e.toISOString()}:function(e){return e.getUTCFullYear()+"-"+j(e.getUTCMonth()+1)+"-"+j(e.getUTCDate())+"T"+j(e.getUTCHours())+":"+j(e.getUTCMinutes())+":"+j(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function Wt(t){return function(){return!t.apply(this,arguments)}}function lt(t,e,r){for(var n=0,a=r.length;n<a;)e=t(e,r[n]),n+=1;return e}function Xt(t,e){for(var r=0,n=e.length,a=[];r<n;)t(e[r])&&(a[a.length]=e[r]),r+=1;return a}function ft(t){return Object.prototype.toString.call(t)==="[object Object]"}var Gt=function(){function t(e,r){this.xf=r,this.f=e}return t.prototype["@@transducer/init"]=O.init,t.prototype["@@transducer/result"]=O.result,t.prototype["@@transducer/step"]=function(e,r){return this.f(r)?this.xf["@@transducer/step"](e,r):e},t}();function Yt(t){return function(e){return new Gt(t,e)}}var $t=f(L(["fantasy-land/filter","filter"],Yt,function(t,e){return ft(e)?lt(function(r,n){return t(e[n])&&(r[n]=e[n]),r},{},A(e)):Xt(t,e)})),Zt=f(function(e,r){return $t(Wt(e),r)});function gt(t,e){var r=function(o){var i=e.concat([t]);return Vt(o,i)?"<Circular>":gt(o,i)},n=function(u,o){return z(function(i){return H(i)+": "+r(u[i])},o.slice().sort())};switch(Object.prototype.toString.call(t)){case"[object Arguments]":return"(function() { return arguments; }("+z(r,t).join(", ")+"))";case"[object Array]":return"["+z(r,t).concat(n(t,Zt(function(u){return/^\d+$/.test(u)},A(t)))).join(", ")+"]";case"[object Boolean]":return typeof t=="object"?"new Boolean("+r(t.valueOf())+")":t.toString();case"[object Date]":return"new Date("+(isNaN(t.valueOf())?r(NaN):H(Ht(t)))+")";case"[object Map]":return"new Map("+r(Array.from(t))+")";case"[object Null]":return"null";case"[object Number]":return typeof t=="object"?"new Number("+r(t.valueOf())+")":1/t===-1/0?"-0":t.toString(10);case"[object Set]":return"new Set("+r(Array.from(t).sort())+")";case"[object String]":return typeof t=="object"?"new String("+r(t.valueOf())+")":H(t);case"[object Undefined]":return"undefined";default:if(typeof t.toString=="function"){var a=t.toString();if(a!=="[object Object]")return a}return"{"+n(t,A(t)).join(", ")+"}"}}var pt=p(function(e){return gt(e,[])}),Jt=f(function(e,r){if(e===r)return r;function n(c,s){if(c>s!=s>c)return s>c?s:c}var a=n(e,r);if(a!==void 0)return a;var u=n(typeof e,typeof r);if(u!==void 0)return u===typeof e?e:r;var o=pt(e),i=n(o,pt(r));return i!==void 0&&i===o?e:r}),Qt=function(){function t(e,r){this.xf=r,this.f=e}return t.prototype["@@transducer/init"]=O.init,t.prototype["@@transducer/result"]=O.result,t.prototype["@@transducer/step"]=function(e,r){return this.xf["@@transducer/step"](e,this.f(r))},t}(),Kt=function(e){return function(r){return new Qt(e,r)}},te=f(L(["fantasy-land/map","map"],Kt,function(e,r){switch(Object.prototype.toString.call(r)){case"[object Function]":return et(r.length,function(){return e.call(this,r.apply(this,arguments))});case"[object Object]":return lt(function(n,a){return n[a]=e(r[a]),n},{},A(r));default:return z(e,r)}})),ee=Number.isInteger||function(e){return e<<0===e};function ht(t){return Object.prototype.toString.call(t)==="[object String]"}function yt(t,e){var r=t<0?e.length+t:t;return ht(e)?e.charAt(r):e[r]}var dt=f(function(e,r){if(r!=null)return ee(e)?yt(e,r):r[e]}),re=p(function(e){return k(e)?!0:!e||typeof e!="object"||ht(e)?!1:e.length===0?!0:e.length>0?e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1):!1}),mt=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function ne(t,e,r){return function(a,u,o){if(re(o))return t(a,u,o);if(o==null)return u;if(typeof o["fantasy-land/reduce"]=="function")return e(a,u,o,"fantasy-land/reduce");if(o[mt]!=null)return r(a,u,o[mt]());if(typeof o.next=="function")return r(a,u,o);if(typeof o.reduce=="function")return e(a,u,o,"reduce");throw new TypeError("reduce: list must be array or iterable")}}function ae(t,e,r){for(var n=0,a=r.length;n<a;){if(e=t["@@transducer/step"](e,r[n]),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}n+=1}return t["@@transducer/result"](e)}var ue=f(function(e,r){return E(e.length,function(){return e.apply(r,arguments)})});function oe(t,e,r){for(var n=r.next();!n.done;){if(e=t["@@transducer/step"](e,n.value),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}n=r.next()}return t["@@transducer/result"](e)}function ie(t,e,r,n){return t["@@transducer/result"](r[n](ue(t["@@transducer/step"],t),e))}var se=ne(ae,ie,oe),ce=function(){function t(e){this.f=e}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(e){return e},t.prototype["@@transducer/step"]=function(e,r){return this.f(e,r)},t}();function le(t){return new ce(t)}var vt=rt(function(t,e,r){return se(typeof t=="function"?le(t):t,e,r)});function fe(t,e){return function(){return e.call(this,t.apply(this,arguments))}}function wt(t,e){return function(){var r=arguments.length;if(r===0)return e();var n=arguments[r-1];return k(n)||typeof n[t]!="function"?e.apply(this,arguments):n[t].apply(n,Array.prototype.slice.call(arguments,0,r-1))}}var St=rt(wt("slice",function(e,r,n){return Array.prototype.slice.call(n,e,r)})),ge=p(wt("tail",St(1,1/0)));function pe(){if(arguments.length===0)throw new Error("pipe requires at least one argument");return E(arguments[0].length,vt(fe,arguments[0],ge(arguments)))}var he=p(function(e){var r=vt(Jt,0,te(function(n){return n[0].length},e));return E(r,function(){for(var n=0;n<e.length;){if(e[n][0].apply(this,arguments))return e[n][1].apply(this,arguments);n+=1}})}),ye=function(){function t(e,r){this.xf=r,this.n=e}return t.prototype["@@transducer/init"]=O.init,t.prototype["@@transducer/result"]=O.result,t.prototype["@@transducer/step"]=function(e,r){return this.n>0?(this.n-=1,e):this.xf["@@transducer/step"](e,r)},t}();function de(t){return function(e){return new ye(t,e)}}var me=f(L(["drop"],de,function(e,r){return St(Math.max(0,e),1/0,r)})),ve=p(function(t){return yt(-1,t)}),we=f(function(e,r){return me(e>=0?r.length-e:0,r)}),Se=f(function t(e,r){if(!ft(r)&&!k(r))return r;var n=r instanceof Array?[]:{},a,u,o;for(u in r)a=e[u],o=typeof a,n[u]=o==="function"?a(r[u]):a&&o==="object"?t(a,r[u]):r[u];return n}),_e=p(function(e){return et(e.length,function(r,n){var a=Array.prototype.slice.call(arguments,0);return a[0]=n,a[1]=r,e.apply(this,a)})});function Oe(t){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),r=1,n=arguments.length;r<n;){var a=arguments[r];if(a!=null)for(var u in a)b(u,a)&&(e[u]=a[u]);r+=1}return e}var Ae=typeof Object.assign=="function"?Object.assign:Oe,Ee=f(function(e,r){return e<=r}),be=f(function(e,r){return Ae({},r,e)}),W=f(function(e,r){return Array.prototype.slice.call(r,0).sort(function(n,a){var u=e(n),o=e(a);return u<o?-1:u>o?1:0})});const je=400,Ie=10,Te=.8,Me=t=>t.length>0,Ce=(t,e)=>{const r=t.height*e;if(r<=t.width)return{width:r,height:t.height};{const n=t.width/e;return{width:t.width,height:n}}},_t=t=>"url"in t;function*X(t,e){_t(t)?yield e:(yield*X(t.first,e+1),yield*X(t.second,e+1))}const Pe=t=>{const e=[...X(t,0)];if(e.length===0)return 0;const r=Math.max(...e),n=Math.min(...e);return r/(r-n)},Re=({sizeHomogeneity:t,score:e})=>e*t,ke=he([[_e(Ee)(9),()=>30],[N(10),()=>25],[N(11),()=>20],[N(12),()=>10],[zt,()=>5]]),Ne=t=>{const e=t[0].pictures.length,r=pe(W(Re),we(ke(e)),W(dt("score")))(t);return Se({pictures:W(dt("url"))},ve(r))},ze=t=>{let e=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const a=t[n],u=a.width*a.height;u<e&&(e=u),u>r&&(r=u)}return e/r},I=(t,e,r)=>{if(_t(r))return[{position:t,dimension:e,url:r.url}];if(r.horizontal){const n=e.height*r.first.aspectRatio;return[...I(t,{width:n,height:e.height},r.first),...I({x:t.x+n,y:t.y},{width:e.width-n,height:e.height},r.second)]}else{const n=e.width/r.first.aspectRatio;return[...I(t,{width:e.width,height:n},r.first),...I({x:t.x,y:t.y+n},{width:e.width,height:e.height-n},r.second)]}},xe=(t,e,r)=>{const n=I({x:0,y:0},t,r),a=ze(n.map(u=>u.dimension));return{dimension:t,score:e,sizeHomogeneity:a,pictures:n}};class x{constructor(e,r,n){At(this,"aspectRatio",0);this.horizontal=e,this.first=r,this.second=n;const a=r.aspectRatio+n.aspectRatio;this.aspectRatio=e?a:r.aspectRatio*n.aspectRatio/a}}const q=(t,e)=>t+Math.random()*(e-t+1)|0;function*G(t){if(t.length===1)yield t[0];else for(let e=1;e<t.length;e++){const r=G(t.slice(0,e)),n=G(t.slice(e));for(const a of r)for(const u of n)yield new x(!0,a,u),yield new x(!1,a,u)}}const Ot=t=>{const e=t.length-1;if(e===0)return t[0];if(e===1)return new x(q(0,1)===0,t[0],t[1]);const r=q(0,e);let n;do n=q(0,e);while(r===n);const a=new x(q(0,1)===0,t[r],t[n]);return Ot(t.with(r,a).toSpliced(n,1))};function*qe(t){for(;;)yield Ot(t)}const De={maxComputationTime:je,randomizeThreshold:Ie};var Fe=Object.freeze({__proto__:null,findSolution:(t,e,r)=>{const n=be(r??{},De),a=Date.now(),u=e.width/e.height,o=[],i=t.length>=n.randomizeThreshold,c=i?qe(t):G(t);for(const s of c){const y=1/(1+Math.abs(s.aspectRatio-u)),h=Pe(s);if(i&&(h<=.6||y<Te))continue;const w=Ce(e,s.aspectRatio);if(o.push(xe(w,y,s)),i&&Date.now()-a>n.maxComputationTime)break}if(console.debug("solutions found: ",o.length),!Me(o))throw new Error("No solution");return Ne(o)}});F(Fe)})();
